plugins {
    id 'java'
}

repositories {
    mavenCentral()
}

def hadoopAwsVersion = System.getenv('HADOOP_AWS_VER')
def deltaSparkVersion = System.getenv('DELTA_SPARK_VER')
def scalaVersion = System.getenv('SCALA_VER')

dependencies {
    implementation "org.apache.hadoop:hadoop-aws:$hadoopAwsVersion"
    implementation "io.delta:delta-spark_${scalaVersion}:$deltaSparkVersion"
}

task downloadJars(type: Copy) {
    def jarDir = file('gradle_jars')
    from configurations.runtimeClasspath
    into jarDir
}

downloadJars.doLast {
    println "Downloaded JARs are copied to gradle_jars directory"
}
